<div class="contenedor-visualizacion">
  <div class="visualizacion-mapa">
    <!-- Aqu√≠ luego ir√° tu mapa din√°mico (Leaflet, Google Maps, etc.) -->
    <div id="mapa">
      <p>üó∫Ô∏è Mapa de Sensores (en construcci√≥n)</p>
    </div>
  </div>

  <div class="visualizacion-panel">
    <h3>Estaci√≥n de Monitoreo:</h3>
    <p id="nombre-estacion">Cargando...</p>

    <h4>√öltima lectura:</h4>
    <p id="ultima-lectura">--/--/---- --:--</p>

    <hr>

    <ul class="lista-mediciones">
      <li><strong>pH:</strong> <span id="dato-ph">--</span></li>
      <li><strong>Turbidez:</strong> <span id="dato-turbidez">--</span></li>
      <li><strong>Ox√≠geno Disuelto:</strong> <span id="dato-oxigeno">--</span></li>
      <li><strong>Conductividad:</strong> <span id="dato-conductividad">--</span></li>
      <li><strong>Temperatura:</strong> <span id="dato-temperatura">--</span></li>
    </ul>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  obtenerDatosEstacion();
});

function obtenerDatosEstacion() {
  fetch("api/obtener_estacion.php") 
    .then(response => {
      if (!response.ok) throw new Error("Error al obtener los datos");
      return response.json();
    })
    .then(data => {
      document.getElementById("nombre-estacion").textContent = data.nombre_estacion || "No disponible";
      document.getElementById("ultima-lectura").textContent = data.ultima_lectura || "--/--/---- --:--";
      document.getElementById("dato-ph").textContent = data.ph ?? "--";
      document.getElementById("dato-turbidez").textContent = data.turbidez ?? "--";
      document.getElementById("dato-oxigeno").textContent = data.oxigeno_disuelto ?? "--";
      document.getElementById("dato-conductividad").textContent = data.conductividad ?? "--";
      document.getElementById("dato-temperatura").textContent = data.temperatura ?? "--";
    })
    .catch(error => {
      console.error("Error:", error);
      document.getElementById("nombre-estacion").textContent = "Error al cargar datos";
    });
}
</script>
