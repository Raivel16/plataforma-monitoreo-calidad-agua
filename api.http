@api = http://localhost:3000/api
@json = application/json



### LOGIN
POST {{api}}/auth/login
Content-Type: {{json}}

{
  "NombreUsuario": "admin",
  "Contrasena": "admin123"
}

### Register
POST {{api}}/auth/register
Content-Type: {{json}}

{
  "RolID": 3,
  "NombreUsuario": "nuevoUsuario",
  "Contrasena": "password123",
  "RepetirContrasena": "password123",
  "Correo": "micorreo@ejemplo.com"
}







############################################
# üßç‚Äç‚ôÇÔ∏è USUARIOS
############################################
### Obtener todos los usuarios
GET {{api}}/usuarios

### Obtener usuario por ID
GET {{api}}/usuarios/1

### Crear nuevo usuario
POST {{api}}/usuarios
Content-Type: {{json}}

{
  "nombre": "Raivel Lorenzo",
  "correo": "raivel@ejemplo.com",
  "password": "123456",
  "rolId": 1
}

### Actualizar datos del usuario
PATCH {{api}}/usuarios/1
Content-Type: {{json}}

{
  "nombre": "Raivel Actualizado"
}

### Eliminar usuario
DELETE {{api}}/usuarios/1

### Autenticar usuario (login)
POST {{api}}/usuarios/login
Content-Type: {{json}}

{
  "correo": "raivel@ejemplo.com",
  "password": "123456"
}

### Obtener alertas asignadas o revisadas por usuario
GET {{api}}/usuarios/1/alertas


############################################
# üß© ROLES
############################################
### Listar roles
GET {{api}}/roles

### Obtener rol espec√≠fico
GET {{api}}/roles/1

### Crear rol
POST {{api}}/roles
Content-Type: {{json}}

{
  "nombre": "Supervisor",
  "descripcion": "Revisa alertas de sensores"
}

### Actualizar rol
PATCH {{api}}/roles/1
Content-Type: {{json}}

{
  "descripcion": "Supervisa alertas y anomalias"
}

### Eliminar rol
DELETE {{api}}/roles/1


############################################
# üö® ALERTAS
############################################
### Listar todas las alertas
GET {{api}}/alertas

### Obtener detalle de una alerta
GET {{api}}/alertas/1

### Crear relaci√≥n alerta-usuario
POST {{api}}/alertas
Content-Type: {{json}}

{
  "usuarioId": 1,
  "alertaId": 10,
  "estado": "Pendiente"
}

### Marcar como revisada
PATCH {{api}}/alertas/1/revisar

### Marcar como atendida
PATCH {{api}}/alertas/1/atender

### Eliminar alerta
DELETE {{api}}/alertas/1


############################################
# ‚ö†Ô∏è ANOMAL√çAS
############################################
### Listar anomal√≠as
GET {{api}}/anomalias

### Obtener anomal√≠a por ID
GET {{api}}/anomalias/1

### Registrar nueva anomal√≠a
POST {{api}}/anomalias
Content-Type: {{json}}

{
  "sensorId": 2,
  "tipo": "Valor fuera de rango",
  "descripcion": "Lectura de pH fuera del rango permitido"
}

### Confirmar anomal√≠a como real
PATCH {{api}}/anomalias/1/confirmar

### Marcar anomal√≠a como falsa
PATCH {{api}}/anomalias/1/descartar

### Eliminar anomal√≠a
DELETE {{api}}/anomalias/1


############################################
# üìä DATOS
############################################
### Obtener todas las lecturas
GET {{api}}/datos

### Obtener lectura espec√≠fica
GET {{api}}/datos/2

### Registrar nueva lectura
POST {{api}}/datos
Content-Type: {{json}}

{
  "SensorID": 3,
  "ParametroID": 5,
  "valor": 7.4,
  "TimestampEnvio": "2025-10-23T20:00:00Z"
}


### Obtener lecturas por sensor
GET {{api}}/datos/sensor/3

### Eliminar lectura
DELETE {{api}}/datos/1


############################################
# ‚öôÔ∏è PAR√ÅMETROS
############################################
### Listar par√°metros
GET {{api}}/parametros

### Obtener par√°metro
GET {{api}}/parametros/1

### Crear par√°metro
POST {{api}}/parametros
Content-Type: {{json}}

{
  "nombre": "pH",
  "unidad": "pH"
}

### Actualizar par√°metro
PATCH {{api}}/parametros/1
Content-Type: {{json}}

{
  "unidad": "Unidades pH"
}

### Eliminar par√°metro
DELETE {{api}}/parametros/1


############################################
# ü§ñ PREDICCIONES
############################################
### Listar predicciones
GET {{api}}/predicciones

### Obtener predicci√≥n
GET {{api}}/predicciones/5

### Generar nueva predicci√≥n
POST {{api}}/predicciones
Content-Type: {{json}}

{
  "SensorID": 1
}

### Eliminar predicci√≥n
DELETE {{api}}/predicciones/5


############################################
# üìü REGISTROS DE ALERTAS
############################################
### Listar registros
GET {{api}}/registrosAlertas

### Obtener registro espec√≠fico
GET {{api}}/registrosAlertas/1

### Crear nuevo registro
POST {{api}}/registrosAlertas
Content-Type: {{json}}

{
  "alertaId": 10,
  "mensaje": "Alerta de pH alto generada",
  "notificada": false
}

### Marcar como notificada
PATCH {{api}}/registrosAlertas/1/notificar

### Marcar error de notificaci√≥n
PATCH {{api}}/registrosAlertas/1/error

### Eliminar registro
DELETE {{api}}/registrosAlertas/1


############################################
# üßæ UMBRALES
############################################
### Listar umbrales
GET {{api}}/umbrales

### Obtener umbral
GET {{api}}/umbrales/1

### Crear umbral
POST {{api}}/umbrales
Content-Type: {{json}}

{
  "parametroId": 1,
  "min": 6.5,
  "max": 8.5,
  "tipo": "Normal"
}

### Actualizar umbral
PATCH {{api}}/umbrales/1
Content-Type: {{json}}

{
  "max": 8.8
}

### Eliminar umbral
DELETE {{api}}/umbrales/1


### Verificar funcionamiento
GET {{api}}/estado

############################################
# üå°Ô∏è SENSORES
############################################
### Listar sensores
GET {{api}}/sensores

### Obtener sensor
GET {{api}}/sensores/2

### Registrar nuevo sensor
POST {{api}}/sensores
Content-Type: {{json}}

{
  "Nombre": "Sensor PH-01",
  "Modelo": "PHX1000",
  "Fabricante": "Sensores SA",
  "Latitud": 12.3456,
  "Longitud": 65.4321,
  "Descripcion": "Sensor para medir pH del agua"
}


### Actualizar sensor
PATCH {{api}}/sensores/3
Content-Type: {{json}}

{
  "Modelo": "PHX20020",
  "Fabricante": "Sensores SA",
  "Latitud": 12.3456,
  "Longitud": 65.4321,
  "Descripcion": "Sensor actualizado para medir pH del agua"
}

### Desactivar sensor
PATCH {{api}}/sensores/3/desactivar

### Eliminar sensor
DELETE {{api}}/sensores/3
